 

#### 1-2 关系数据库

1. 关系数据库：
   1. 数据结构+运算符 = 关系模型
   2. 关系运算算法
   3. 查询语言+查询处理+查询优化
   4. 事务处理
   5. 并发控制
   6. 安全检查
   7. 数据字典

2. 值：具体的值。必须为原子值。

   元组：一行；元组分量：一个值。

   属性：一列；属性分量：一个值。

   域：（某属性）值的取值范围，值的集合。

   原子域：不可再分的域。

   复合域：原子域的并集。

   关系（表）：二维表（元组的集合）+列同域+属性名不同+元组不同+值为原子值。

3. 关系模型（数据模型的实例）：R(U,D,DOM,I,F)
   - 简记：R(…U)
   - 数据结构：关系 —— U属性名、D域、DOM属性域映射、F属性之间的依赖关系
   - 数学基础：集合代数。
   - 逻辑结构：二维表。
   - 完整性约束（语义）：I
   - 数据操作： 

4. 关系模式：一个具体的关系模型

   关系实例：关系模式+某一时刻的数据，空表亦为实例。

   关系数据库模式：关系模式的集合

   关系数据库实例：关系实例的集合

5. 键/码的类别：元组不重复$\iff$超码不同

   1. 超码：属性**集合**，唯一标识元组
   2. 候选码：最小的超码，任一个真子集都不是超码。
      一个关系可能有多个候选码。
      候选码（主码）的值在本关系中一定唯一，但是相对于另外的关系（是相对关系的外码）就不一定元组数据唯一了。
   3. 主码：选择的候选码（属性集合），极少变化。
      一个关系只能有一个主码。
   4. 外码：其他关系的主码被用于本关系（可能不唯一）。在本关系中可空，或者必须为对应域中值。

6. 关系数据库的完整性约束

   1. 实体完整性约束 —— 主属性：不能为空
   2. 参照完整性约束 —— 外码：取值必须为‘**空值’**或参照关系中取值的子集
   3. 语义完整性约束 —— 自定义，满足应用需求
   4. 函数依赖 —— 属性之间存在应用需求的映射

7. 关系运算

   1. 关系代数
      过程化的语言——集合运算步骤
   2. 关系演算（元组演算、域演算）
      非过程化的语言——只描述最终结果

8. **关系代数**

   1. 六种基本运算：

      | 选择 | 投影 | 并 | 差 | 笛卡尔积 | 重命名 |
      | ---- | ---- | ---- | ---- | ---- | ---- |
      | $\sigma$ | $\Pi$ | $\cup$ | $-$ | $\times$ | $\rho$ |

   2. 附加的运算：可以用基本关系表示

      | 交     | 自然连接  | 除     | $\theta$连接                      | 赋值    | 外连接 |
      | ------ | --------- | ------ | --------------------------------- | ------- | ------ |
      | $\cap$ | $\bowtie$ | $\div$ | $\mathop{\bowtie}\limits_{theta}$ | $\gets$ | ⟕⟖⟗    |

   3. 扩展的运算：不能用基本关系表示

      广义投影、聚集

9. 基本关系代数运算

   1. 选择：选择元组$\sigma_{sth>10 \and sth2 < 19}(R)$
      只允许以下运算符：{=, ≠, >, ≥, <, ≤}
   2. 投影：选择属性$\Pi_{A_1,A_2,...} (R)$
   3. 并：两个关系属性相同$ R \cup S$
   4. 差
   5. 笛卡尔积：两个关系属性名不同$R \times S$，排列组合。
   6. 重命名：一个关系$\rho_{R(A_1,A_2,...)}(S)$重命名R为S及对应属性名。

10. 附加关系代数运算
    简化查询。

    1. 交：两个关系属性相同。$R \cap S = R - (R-S)$ 
    2. 自然连接：两个关系相同属性值一致（不一致舍弃，去除重复属性）
       $R\bowtie S = \Pi_{U_R\cup U_S}(\sigma_{\and_{i\in U_R} (R.i=S.i)}(R\times S))$
    3. $\theta $连接：比**笛卡尔积**多一个选择$R\overset{\bowtie}{_\theta} S = \sigma_{\theta}(R\times S)$
    4. 赋值：定义关系变量
    5. 外连接：左外连接、右外连接、全外连接：保留全部属性，用NULL填充没有的属性。
    6. 除：除关系为被除关系子集。R中的、R与S中共同属性相同的元组，同时除掉S属性，只保留R独有的属性。

11. 扩展关系代数运算
    不能用基本关系代数表示

    1. 广义投影：投影中算术运算
    2. 聚集

12. 关系演算：非过程化

    1. 元组演算：得到元组集合$\left\{ t| P(t)  \right\}$；P(t)是谓词，t[x]表示元组t的x属性分量。
    2. 域演算：得到的不是整个元组，是部分属性。$\left\{ <X_1,X_2,...>| P(X_i)  \right\}$；

13. 关系运算的安全性：不产生无穷关系和无穷验证

    1. 关系代数：安全的。
    2. 关系演算：不安全。例： {t| 任意的t }
    3. 安全的关系演算：限制在安全表达式范围内。
    4. 没有任何一个关系演算等价于聚集运算，但可以扩展。

